"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UserStructure = void 0;
const tslib_1 = require("tslib");
const mutations_1 = require("../../queries/mutations");
const queries_1 = require("../../queries/queries");
/** Represents an AniList User. */
class UserStructure {
    constructor(json, client) {
        if (json.errors)
            throw new Error(JSON.stringify(json.errors));
        this.info = json;
        if (client.token)
            this.client = client;
    }
    /**
     * Follow this user.\
     * Requires you to be logged in.
     */
    follow() {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            if (!((_a = this.client) === null || _a === void 0 ? void 0 : _a.token))
                throw new Error('This feature requires you to be logged in.');
            return this.client.utilities.APIRequest(mutations_1.UserFollow, { userId: this.info.id }, this.client);
        });
    }
    /** Get this user's AniList stats. */
    getStats() {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            return (_a = this.client) === null || _a === void 0 ? void 0 : _a.utilities.APIRequest(queries_1.UserStatsQuery, { id: this.info.id }, this.client);
        });
    }
}
exports.UserStructure = UserStructure;
